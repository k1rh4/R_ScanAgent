version: "3.3"

services:
  redscan:
    build: .
    image: redscan:latest
    ports:
      - "8000:8000"
    volumes:
      - ./output:/app/output
      - ./runtime:/app/runtime
    environment:
      - OPENAI_API_KEY
      - OPENAI_BASE_URL
      - LLM_BASE_URL
      - LLM_PROVIDER
      - LLM_MODEL
      - OPENAI_MODEL
      - ANTHROPIC_API_KEY
      - ANTHROPIC_MODEL
      - GEMINI_API_KEY
      - GEMINI_MODEL
      - LLM_TIMEOUT
      - LLM_RETRIES
      - LLM_RETRY_BACKOFF
      - LLM_RETRY_MODE
      - LLM_RETRY_STATUS
      - REDSCAN_CONCURRENCY
      - REDSCAN_QUEUE_SIZE
      - REDSCAN_RESULT_TTL_SEC
      - REDSCAN_RESULT_MAX_ITEMS
      - REDSCAN_ENABLE_COMMIX
      - REDSCAN_ENABLE_FFUF
      - REDSCAN_TOOL_TIMEOUT
      - REDSCAN_SCAN_LOG_MAX_BYTES
      - REDSCAN_SCAN_LOG_BACKUP_COUNT
      - REDSCAN_OUTPUT_DIR=/app/output
      - REDSCAN_SCAN_LOG=/app/runtime/scan.log
      - REDSCAN_COMPLETE_PATH_LOG=/app/runtime/complete_path.log
