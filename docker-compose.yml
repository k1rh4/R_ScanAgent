services:
  redscan:
    build: .
    image: redscan:latest
    ports:
      - "8000:8000"
    working_dir: /work
    volumes:
      - ./:/work
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - LLM_PROVIDER=${LLM_PROVIDER}
      - OPENAI_MODEL=${OPENAI_MODEL}
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
      - ANTHROPIC_MODEL=${ANTHROPIC_MODEL}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
      - GEMINI_MODEL=${GEMINI_MODEL}
      - REDSCAN_CONCURRENCY=4
      - REDSCAN_QUEUE_SIZE=100
    command: ["uvicorn", "app:app", "--host", "0.0.0.0", "--port", "8000"]
